### [Установка](#установка-мода)

| | |
|---|---|
| [Возврат принтера к заводским установкам](#возврат-принтера-к-заводским-установкам-необходимо-для-установки-мода) | [Установка мода](#установка-мода) |
| [Обновление мода](#обновление-мода) | [Как обновлять сток?](#как-обновлять-сток) |
| [Удаление - временное отключение мода](#удаление---временное-отключение-мода) | [Восстановление загрузки](#восстановление-загрузки)  |
| - | [Помочь разработке](#помочь-разработке) |

### [Калибровка](#калибровка-принтера-для-новичков)

| | |
|---|---|
| [Настройка PID экструдера](#настройка-pid-экструдера) | [Настройка PID стола](#настройка-pid-стола) |
| [Калибровка винтов стола](#калибровка-винтов-стола-bed_level_screws_tune) | [Построение точной карты стола](#построение-точной-карты-стола-auto_full_bed_level) |
| [Адаптивная калибровка стола](#адаптивная-калибровка-стола-kamp) | [Как работает Z-Offset](#как-работает-z-offset-на-вашем-принтере) |
| [Калибровка шейперов](#калибровка-шейперов-input-shaper) | |

[@zmod_help_bot](http://t.me/zmod_help_bot)

## Возврат принтера к заводским установкам (необходимо для установки мода)

0. [Удалить KlipperMod](https://github.com/xblax/flashforge_ad5m_klipper_mod/blob/master/docs/UNINSTALL.md), если он был установлен
1. Сбросить принтер до настроек по умолчанию
2. Отформатировать USB Flash в FAT/FAT16/FAT32
3. Поместить файл из [Native firmware](https://github.com/ghzserg/zmod/wiki/R) в корневую папку USB Flash
   - [Adventurer5M-3.1.9-2.2.3-20250807-Factory.tgz](https://github.com/ghzserg/zmod/releases/download/R/Adventurer5M-3.1.9-2.2.3-20250807-Factory.tgz) для FF5m 
   - [Adventurer5MPro-3.1.3-2.2.3-20250107-Factory.tgz](https://github.com/ghzserg/zmod/releases/download/R/Adventurer5MPro-3.1.3-2.2.3-20250107-Factory.tgz) для FF5m**Pro** версии 
   - [AD5X-1.1.7-1.1.0-3.0.6-20250912.tgz](https://github.com/ghzserg/zmod/releases/download/R/AD5X-1.1.7-1.1.0-3.0.6-20250912-Factory.tgz.gz) для AD5X
4. Выключить принтер
5. Вставить флешку в принтер
6. Включить принтер
7. Дождаться установки родной прошивки
8. Настроить WiFi или Lan *новый бобер*
9. Получить последние обновления для принтера

<div align="center">

[![Top](https://github.com/ghzserg/zmod/wiki/images/Top.svg)](#Установка)

</div>

---

## Установка мода

[@zmod_help_bot](http://t.me/zmod_help_bot)

[Video](https://www.youtube.com/watch?v=2sfb2OtY7wM)

1. **[Вернуть принтер к заводским настройкам](https://github.com/ghzserg/zmod/wiki/Setup#%D0%B2%D0%BE%D0%B7%D0%B2%D1%80%D0%B0%D1%82-%D0%BF%D1%80%D0%B8%D0%BD%D1%82%D0%B5%D1%80%D0%B0-%D0%BA-%D0%B7%D0%B0%D0%B2%D0%BE%D0%B4%D1%81%D0%BA%D0%B8%D0%BC-%D1%83%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%BA%D0%B0%D0%BC-%D0%BD%D0%B5%D0%BE%D0%B1%D1%85%D0%BE%D0%B4%D0%B8%D0%BC%D0%BE-%D0%B4%D0%BB%D1%8F-%D1%83%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%BA%D0%B8-%D0%BC%D0%BE%D0%B4%D0%B0)** [Внимание AD5X](https://github.com/ghzserg/zmod/wiki/Setup#%D0%B2%D0%BD%D0%B8%D0%BC%D0%B0%D0%BD%D0%B8%D0%B5-ad5x)
2. Отформатировать USB Flash в FAT/FAT16/FAT32
3. Поместить [файл](https://github.com/ghzserg/zmod/releases/) в корневую папку USB Flash.
   - для FF5M: Adventurer5M-**zmod**-\*.tgz
   - для FF5MPro: Adventurer5MPro-**zmod**-\*.tgz
   - для [AD5X](https://github.com/ghzserg/zmod/wiki/AD5X): AD5X-**zmod**-\*.tgz
4. Выключить принтер
5. Вставить флешку в принтер
6. Включить принтер
7. Дождаться установки мода

   <img width="800" height="480" alt="install" src="https://github.com/user-attachments/assets/9d6b9ad7-e9ec-4bc2-bd8f-54c945b5add5" />
   
   <img width="800" height="480" alt="screenshot" src="https://github.com/user-attachments/assets/19d66329-72f9-4e92-aba6-35b7820ce9a0" />
   
   На AD5X установка может занимать до 40 минут
8. Вытащить флешку
9. Выключить принтер
10. Включить принтер
11. **Открыть в браузере ip принтера**
    <img width="800" height="480" alt="main" src="https://github.com/user-attachments/assets/a0466fa8-03e8-458d-8cc5-c1efb8f565ac" />
    <img width="800" height="480" alt="ip" src="https://github.com/user-attachments/assets/1d7dd5fa-86f4-4b1a-bd42-364619b20229" />
    
    Если веб интерфейс не открывается, значит родная прошивка деактивировала мод. Чтобы его включить нужно записать на USB флэш файл [AD5X-ENABLE-zmod.tgz](https://github.com/ghzserg/zmod/releases/download/R/AD5X-ENABLE-zmod.tgz) и [активировать мод](https://github.com/ghzserg/zmod/wiki/R/#ad5x-enable-zmodtgz).
     
12. Переведите мод на ваш язык.
    
    <img width="564" height="583" alt="{8E14F84D-E8D1-4129-B192-AA335243A3D9}" src="https://github.com/user-attachments/assets/e6dd3f8a-3cc3-4a05-b5fb-ad8ba372ede6" />
    
    Или в консоли наберите ```LANG LANG=ru```
    
    <img width="881" height="502" alt="image" src="https://github.com/user-attachments/assets/cf3f797d-80e0-4864-85b4-cd28886590f4" />
13. Настройте мод
    
    <img width="558" height="219" alt="{B34D2AF2-F2A6-433D-B9F8-86A83389D5A7}" src="https://github.com/user-attachments/assets/a79ec692-a284-4cb8-a0ad-3be10f33d813" />
    
    Тут отображаются параметры, которые используются при старте, окончании печтати и глобальные праметры. Рекомендуется просто прочитать настройки, но не менять их. Значение каждой настройки можно [посмотреть тут](https://github.com/ghzserg/zmod/wiki/Global_ru)

    <img width="561" height="443" alt="{623507C1-D3AB-4FEF-9A92-E949A85DCB49}" src="https://github.com/user-attachments/assets/3a8028bf-b078-4edc-827b-07e9d49c52f9" />

    Нужно дойти до последнгего экрана и нажать `Ok` или `Reboot`. Если этого не сделать, то это окно будет появляться при каждой загрузке

    <img width="564" height="228" alt="{BCEBDCCC-0703-46F3-8B7B-3BC58E78F27A}" src="https://github.com/user-attachments/assets/72d386a4-18ba-40a9-8f85-a6109a4e4c57" />

    Если хотите  снова увидеть это окно - то наберите к консоли `GLOBAL`
14. Перейдите в `Настройки` -> `Обновления ПО` 
15. Нажмите `Проверить обновления`, подождите пока обновления проверятся
16. Нажать **Обновление** и обновить все компоненты.
    <img width="1239" height="535" alt="image" src="https://github.com/user-attachments/assets/b42c4ce9-1c0a-45c0-a20c-36919a27d648" />

    Если показывает много ошибок, то это нормально. Плагины не входят в состав прошивки и скачиваются отдельно. Нужно нажать `Проверить обновления`.
    И по одному восстановить и обновить все модули. Принтер при этом будет перезагружаться.
    
    <img width="671" height="844" alt="image" src="https://github.com/user-attachments/assets/d6fe3ad0-64be-4c07-8f5e-53647a6bd6ee" />

17. Активируйте [плагин с рекомендациями](https://github.com/ghzserg/recommend/blob/main/Readme_ru.md)
    
    <img width="560" height="224" alt="{E27E192D-3FC2-49AC-BEAF-F7B574FFEF45}" src="https://github.com/user-attachments/assets/dade8a2e-fc67-4df5-aad4-85cc5cd81d66" />

    Или введите в консоли ```ENABLE_PLUGIN name=recommend```

    <img width="864" height="87" alt="image" src="https://github.com/user-attachments/assets/ca96c67f-cc58-4655-8fdf-9554d1a489a3" />
18. [Настройте  Orca](https://github.com/ghzserg/zmod/wiki/Recomendations#%D0%BE%D1%82%D0%BF%D1%80%D0%B0%D0%B2%D0%BB%D1%8F%D0%B9%D1%82%D0%B5-%D1%84%D0%B0%D0%B9%D0%BB%D1%8B-%D0%BD%D0%B0--%D0%BF%D0%B5%D1%87%D0%B0%D1%82%D1%8C-%D1%87%D0%B5%D1%80%D0%B5%D0%B7-octoklipper)  
    Весь стартовый код нужно заменить на этот:

    ```
    START_PRINT EXTRUDER_TEMP=[nozzle_temperature_initial_layer] BED_TEMP=[bed_temperature_initial_layer_single]
    M190 S[bed_temperature_initial_layer_single]
    M104 S[nozzle_temperature_initial_layer]
    SET_PRINT_STATS_INFO TOTAL_LAYER=[total_layer_count]
    ```
    
    ```START_PRINT EXTRUDER_TEMP= BED_TEMP=``` **должно писаться в одну строку**

    Конечный код на этот:

    ```END_PRINT```

    <img width="612" height="443" alt="image" src="https://github.com/user-attachments/assets/0dfd8840-c183-4d33-92aa-46f882b8c32c" />

    Код перед сменой слоя на этот:

    ```SET_PRINT_STATS_INFO CURRENT_LAYER={layer_num + 1}```

    <img width="449" height="153" alt="image" src="https://github.com/user-attachments/assets/705fb49e-2c6b-451b-9b99-9d8d1f0e80f8" />

    Необходимо переключиться на протокол "Octo/Klipper":
      - Протокол: `Octo/Klipper`
      - Имя хоста: `IP_принтера:7125`
      - Url-адрес хоста: `IP_принтера` или `IP_принтера:80`

    <img width="673" height="467" alt="image" src="https://github.com/user-attachments/assets/70d5da64-0604-44e5-9102-887b758b5cf0" />
    <img width="473" height="395" alt="image" src="https://github.com/user-attachments/assets/ca4c5330-dc88-4372-a3c8-51527ae76146" />
19. [Включите контроль MD5](https://github.com/ghzserg/zmod/wiki/Recomendations#%D0%B2%D0%BA%D0%BB%D1%8E%D1%87%D0%B8%D1%82%D0%B5--%D0%BA%D0%BE%D0%BD%D1%82%D1%80%D0%BE%D0%BB%D1%8C-md5)

    <img width="307" height="131" alt="image" src="https://github.com/user-attachments/assets/c90c096e-ff42-4479-b094-9d57261e7f36" />
20. [Прочитайте рекомендации](https://github.com/ghzserg/zmod/wiki/Recomendations)
21. [Прочитайте FAQ](https://github.com/ghzserg/zmod/wiki/FAQ)

### Внимание AD5X

[@Khamai](https://t.me/Khamai)

После установки Native Firmware, возможна некорректная парковка печатающей головы к приемнику филамента (недожим шторки приемника, выдавливание филамента на стол и т.п.).

[Через инженерное меню на родной прошивке](https://github.com/ghzserg/zmod/wiki/AD5X#%D0%BD%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B9%D0%BA%D0%B0-%D0%BA%D0%BE%D1%80%D0%B7%D0%B8%D0%BD%D1%8B-%D0%BD%D0%B0-%D1%80%D0%BE%D0%B4%D0%BD%D0%BE%D0%B9-%D0%BF%D1%80%D0%BE%D1%88%D0%B8%D0%B2%D0%BA%D0%B5-ad5x)

Если вы столкнулись с данной ситуацией, необходимо откалибровать парковку по следующему алгоритму:
1. Скачать архив [Set.XY.Offset.zip](https://github.com/ghzserg/zmod/releases/download/R/Set.XY.Offset.zip) и распаковать его в корень флешки
2. Вставить флешку в выключенный принтер и включить его.
3. На экране принтера появится интерфейс для калибровки. Необходимо нажать Reset.
4. Стрелками управления припарковать печатающую голову к приемнику таким образом, чтобы печатающая голова достаточно прижимала рычажок шторки, сопло было за подвижной шторкой, а сама шторка была заподлицо с передней поверхностью приемника.
5. Зафиксировать результат калибровки кнопкой Set.
6. Вынуть флешку и перезагрузить принтер.

<div align="center">

[![Top](https://github.com/ghzserg/zmod/wiki/images/Top.svg)](#Установка)

</div>

---

## Калибровка принтера для новичков

| | |
|---|---|
| [Настройка PID экструдера](#настройка-pid-экструдера) | [Настройка PID стола](#настройка-pid-стола) |
| [Калибровка винтов стола](#калибровка-винтов-стола-bed_level_screws_tune) | [Построение точной карты стола](#построение-точной-карты-стола-auto_full_bed_level) |
| [Адаптивная калибровка стола](#адаптивная-калибровка-стола-kamp) | [Как работает Z-Offset](#как-работает-z-offset-на-вашем-принтере) |
| [Калибровка шейперов](#калибровка-шейперов-input-shaper) | |

В общем случае ничего калибровать не нужно, но если вы хотите настроить принтер лучше то читайте дальше:

Если вы прошли стартовые калибровки:
<img width="800" height="480" alt="image" src="https://github.com/user-attachments/assets/c0c63cc4-c4b3-46d4-a3e7-6485d8bf26bb" />

То у вас уже:
- Настроен z-offset
- Есть карта стола ```MESH_DATA```(снятая на 60 градусах) - ее нельзя удалять, если вы пользуетесь родным экраном, т.к. он загружает ее при каждой печати
- Есть калибровка PID экструдера на 240 градусах

Но эти настройки достаточно общие, мало кто печатает при температуре сопла 240 градусов и температуре стола  60 градусов.

<div align="center">

[![Top](https://github.com/ghzserg/zmod/wiki/images/Top.svg)](#Калибровка)

</div>

---

### Настройка PID экструдера

**Зачем это нужно?**
Представьте, что экструдер — это духовка. Если температура в ней постоянно «прыгает», то блюдо (ваша деталь) может испечься неравномерно. PID-калибровка как раз «учит» ваш принтер точно поддерживать нужную температуру, без скачков. Это критически важно для качественной печати.

**Важный момент перед началом!**
Калибровать нужно именно для тех условий, в которых вы печатаете:
*   **Температура:** Ту, которую вы чаще всего используете для своего пластика (например, 210°C для PLA или 255°C для PETG).
*   **Охлаждение:** Кулер должен работать с той же мощностью, что и при обычной печати.

**Как сделать калибровку?**

-  Используйте специальную команду (макрос) [PID_TUNE_EXTRUDER](https://github.com/ghzserg/zmod/wiki/Calibrations_ru#pid_tune_extruder)

-  Её можно ввести вручную в консоль или нажать на кнопку в интерфейсе, если она у вас есть:
    <img width="283" height="265" alt="image" src="https://github.com/user-attachments/assets/20b8a3c8-4726-44b0-b986-34881d95cb18" />

-  Сама команда выглядит так (это пример!):
    ```gcode
    PID_TUNE_EXTRUDER TEMPERATURE=255 COOLER=80
    ```
    **Что это значит:**
    *   `TEMPERATURE=255` — калибровка выполняется для температуры 255°C. Установите нужную вам температуру.
    *   `COOLER=80` — кулер дует на мощности 80%.

-  **После завершения:**
    *   Принтер сам сохранит новые настройки.
    *   **Обязательно перезагрузите принтер!** Это нужно, чтобы обновить данные в системе и избежать зависаний.

<div align="center">

[![Top](https://github.com/ghzserg/zmod/wiki/images/Top.svg)](#Calibrations)

</div>

---

### Настройка PID стола

**Зачем это нужно?**
Стол вашего принтера, как и экструдер, должен точно держать температуру. Если она будет плавать, это может привести к проблемам с прилипанием первого слоя или даже к короблению (отслоению) детали по краям. PID-калибровка стола научит его быстро и стабильно достигать нужной температуры и не перегреваться.

Рекомендация для AD5X

Откройте файл `printer.cfg` и установите  в секции ```heater_bed```:
```
[heater_bed]
max_power: 0.6
```
Это позволит столу нагреваться быстрее и PID будет настраиваться корректно.
После изменения и сохранения параметра  нужно перезагрузить принтер.

Или можно включить плагин рекомендаций и он сам поправит этот файл: ```ENABLE_PLUGIN NAME=recommend```

**Важный момент перед началом!**
Здесь правило такое же, как и с экструдером: калибруйте на ту температуру, которую вы планируете использовать чаще всего при печати (например, 60°C для PLA или 110°C для ABS).

**Как сделать калибровку?**

-  Используйте макрос [PID_TUNE_BED](https://github.com/ghzserg/zmod/wiki/Calibrations_ru#pid_tune_bed)

-  Его также можно ввести в консоль или вызвать кнопкой в интерфейсе (часто она находится рядом с кнопкой для калибровки экструдера):

    <img width="227" height="192" alt="image" src="https://github.com/user-attachments/assets/77dd8332-1912-41df-a94e-469ebfa2f895" />

-  Команда для стола выглядит еще проще:
    ```gcode
    PID_TUNE_BED TEMPERATURE=80
    ```
    **Что это значит:**
    *   `TEMPERATURE=80` — калибровка выполняется для температуры стола 80°C. Установите нужную вам температуру.

-  **После завершения:**
    *   Новые настройки автоматически сохранятся.
    *   **Не забудьте перезагрузить принтер!** Это завершит процесс применения новых параметров.

<div align="center">

[![Top](https://github.com/ghzserg/zmod/wiki/images/Top.svg)](#Калибровка)

</div>

---

### Калибровка винтов стола (BED_LEVEL_SCREWS_TUNE)

**Зачем это нужно?**
Ваш стол держится на нескольких винтах. Если они закручены по-разному, стол перекашивается, и расстояние между ним и соплом становится неравномерным. Из-за этого где-то пластик прилипает плохо, а где-то сопло может вообще задеть модель. Эта калибровка помогает идеально выровнять стол, регулируя 4 винта его крепления.

**Как это работает?**
1.  Принтер по очереди подводит сопло к позициям над каждым винтом.
2.  Измеряет расстояние до стола и показывает на экране, какой винт и в какую сторону нужно крутить.
3.  Вы регулируете винты, следуя подсказкам.
4.  Процесс повторяется до тех пор, пока стол не станет ровным.

**Параметры настройки [BED_LEVEL_SCREWS_TUNE](https://github.com/ghzserg/zmod/wiki/Calibrations_ru#bed_level_screws_tune):**

*   `EXTRUDER_TEMP=130` — температура экструдера. Нужна, чтобы термическое расширение сопла не исказило измерения. Устанавливайте температуру, при которой пластик еще не сочится из сопла.
*   `BED_TEMP=80` — температура стола. Стол тоже расширяется при нагреве, поэтому калибровку нужно проводить на той температуре, с которой вы печатаете.

Перед калибровкой нужно очистить сопло, иначе измерения будут не корректными!

**Процесс калибровки:**

-  Введите команду в консоль или нажмите кнопку:

    <img width="344" height="310" alt="image" src="https://github.com/user-attachments/assets/6757eb4e-53b7-4b08-903f-75491b4daace" />


    ```gcode
    BED_LEVEL_SCREWS_TUNE EXTRUDER_TEMP=130 BED_TEMP=80
    ```

-  **Важно:**
    *   Принтер нагреет экструдер и стол до заданных температур.
    *   Он начнет процедуру и будет показывать вам, какой винт и насколько нужно подкрутить (например: " clockwise" - по часовой, "counter-clockwise" - против часовой).

    <img width="621" height="394" alt="image" src="https://github.com/user-attachments/assets/f930f4ac-e907-4c83-bc1d-3d5a4e06fe3b" />

-  После первого прохода принтер будет ждать, пока вы выполните регулировку. Когда все винты подкручены, **нажмите кнопку повтор**, чтобы принтер проверил результат. Повторяйте, пока показания не станут идеальными.

-  **Завершение работы:**
    *   Когда вы закончите и выйдите из режима калибровки, принтер **НЕ СБРОСИТ** температуры автоматически.
    *   **Обязательно самостоятельно установите температуры экструдера и стола на ноль через меню управления!**
    *   **Карта стола и z-offset станут не корректными**. Запустите с **родного экрана** калибровку уровня.

    <img width="800" height="480" alt="image" src="https://github.com/user-attachments/assets/2d17f77f-a98b-450d-a7e5-72a0a37e47de" />

<div align="center">

[![Top](https://github.com/ghzserg/zmod/wiki/images/Top.svg)](#Калибровка)

</div>

---

### Построение точной карты стола (AUTO_FULL_BED_LEVEL)

**Зачем это нужно?**
Даже у идеально выровненного стола могут быть небольшие впадинки или бугорки. Карта стола (или "меш-калибровка") — это как "карта высот" вашего стола. Принтер запоминает эти неровности и во время печати будет немного двигать ось Z, чтобы сопло всегда находилось на идеальном расстоянии от поверхности. Это гарантирует безупречное прилипание первого слоя по всей площади стола.

**Почему именно эта команда?**
Встроенные средства Fluidd и Mainsail не подходят для наших принтеров, потому что они:
* Не умеют работать с **тензодатчиком** (который у нас отвечает за точное определение касания).
* Не делают **очистку сопла** перед началом, чтобы убрать подтеки пластика, который может испортить точность измерений.

Наш макрос [AUTO_FULL_BED_LEVEL](https://github.com/ghzserg/zmod/wiki/Calibrations_ru#auto_full_bed_level) учитывает обе эти особенности!

**Важные настройки:**
Карту нужно строить в тех же условиях, в которых вы печатаете — на прогретом столе и горячем экструдере, так как от температуры металл немного расширяется. Карта стола снятая при 60 градусах кардинально отличается от карты стола  снятой на 110 градусах.

*   `EXTRUDER_TEMP=255` — температура экструдера. Пластик в сопле должен быть расплавлен, чтобы его можно было очистить перед замером. Установите нужную вам температуру.
*   `BED_TEMP=80` — температура стола. Указывайте ту, которую используете для печати. Установите нужную вам температуру.
*   `PROFILE=auto` — имя профиля, под которым карта сохранится. Лучше называть его по температуре стола, например, `80`.

**Пример команды:**
```gcode
AUTO_FULL_BED_LEVEL EXTRUDER_TEMP=255 BED_TEMP=80 PROFILE=80
```

<img width="302" height="342" alt="image" src="https://github.com/user-attachments/assets/643b7bbc-992d-40cb-9404-1fed185ad0ea" />

В этом примере мы строим карту для печати на столе 80°C и сохраняем её под именем `80`.

#### Как использовать сохранённую карту в печати?

Чтобы принтер автоматически подгружал нужную карту в начале каждой печати, добавьте в **стартовый код (Start G-code)** вашего слайсера (OrcaSlicer) следующие строки:

```gcode
START_PRINT EXTRUDER_TEMP=[nozzle_temperature_initial_layer] BED_TEMP=[bed_temperature_initial_layer_single] MESH=80
M190 S[bed_temperature_initial_layer_single] ; Ждать прогрева стола
M104 S[nozzle_temperature_initial_layer] ; Установить температуру сопла
```

**Что здесь происходит:**
*   [START_PRINT](https://github.com/ghzserg/zmod/wiki/Main_ru#start_print) - основной макрос начала печати
*   Строка `START_PRINT... MESH=80` говорит принтеру: "Начни печать и загрузи карту стола с именем `80`".
*   `[nozzle_temperature_initial_layer]` и `[bed_temperature_initial_layer_single]` — это переменные из слайсера, которые автоматически подставят нужные вам температуры для первого слоя.
*   Главное — убедитесь, что параметр `MESH=` указывает на то же имя профиля (в нашем примере это `80`), которое вы использовали в `AUTO_FULL_BED_LEVEL`.

А еще лучше создать несколько карт под каждую температуру 60, 70, 80, 90, 100, 110 и прописать вот такой стартовый код:
```gcode
START_PRINT EXTRUDER_TEMP=[nozzle_temperature_initial_layer] BED_TEMP=[bed_temperature_initial_layer_single] MESH=[bed_temperature_initial_layer_single]
M190 S[bed_temperature_initial_layer_single] ; Ждать прогрева стола
M104 S[nozzle_temperature_initial_layer] ; Установить температуру сопла
```

В этом случае у вас будет загружаться карта стола соответствующая температуре стола.

> Примечание:
> Если сохраненной карты стола нет для выставленного значения в слайсере (например поставили 77 градусов), то алгоритм снимет карту стола и предложит ее сохранить по окончанию печати под именем 77.

**Итоговый порядок действий:**
1.  Построить карту стола макросом `AUTO_FULL_BED_LEVEL` для вашей температуры печати.
2.  Добавить в стартовый код слайсера команду `START_PRINT` с параметром `MESH=...`, указывающим на имя вашего профиля.
3.  Теперь при каждой печати принтер будет автоматически использовать правильную карту неровностей!

<div align="center">

[![Top](https://github.com/ghzserg/zmod/wiki/images/Top.svg)](#Калибровка)

</div>

---

### Адаптивная калибровка стола (KAMP)

**Зачем это нужно?**
[KAMP](https://github.com/ghzserg/zmod/wiki/Calibrations_ru#kamp) — это умная система, которая строит карту неровностей стола не по всей площади, а только в той зоне, где будут находиться ваши модели! Это значительно ускоряет подготовку к печати, особенно на больших принтерах, при этом сохраняя все преимущества точной карты стола.

**Как это работает?**
1.  Перед началом печати KAMP анализирует расположение всех объектов на столе.
2.  Вместо построения полной сетки, он измеряет высоту стола только в нужной области.
3.  Это позволяет сэкономить время без потери качества печати.
4.  Карта становится плотнее, а значит точнее

**Важная особенность процесса:**
При использовании KAMP (и полной калибровки тоже) принтер действует по умной схеме, чтобы обеспечить максимальную точность:
1.  Сопло **нагревается до температуры печати**.
2.  Происходит **очистка сопла** от подтекающего пластика.
3.  Сопло **остывает до 120°C**. Это нужно, чтобы во время измерений с чистого сопла не капал расплавленный пластик, который мог бы исказить результаты.
4.  Происходит **снятие карты стола** холодным и чистым соплом.
5.  После измерений сопло **снова нагревается до температуры печати** для начала печати.

#### Настройка KAMP

**Когда использовать KAMP?**
В большинстве случаев нет необходимости строить карту стола перед каждой печатью. Исключение — если вы используете **сменные пластины с разной толщиной** (например, PEI-лист и стекло), так как у них может быть разная высота.

**1. Включение адаптивной калибровки (KAMP)**

Активируйте эту опцию, чтобы принтер использовал KAMP везде, где это возможно [SAVE_ZMOD_DATA USE_KAMP=1](https://github.com/ghzserg/zmod/wiki/Global_ru#use_kamp).

```gcode
SAVE_ZMOD_DATA USE_KAMP=1
```

Настроить Orca:
- `Профиль процесса` -> `Прочее` -> `Выходной G-cod` -> `Исключение моделей` включить галочку
- `Профиль процесса` -> `Прочее` -> `Выходной G-cod` -> `Помечать модели` включить галочку

<img width="285" height="171" alt="image" src="https://github.com/user-attachments/assets/faceef98-2791-4975-bf72-425f4a2b1dfa" />


**2. Включение калибровки перед каждой печатью**

Если вы хотите, чтобы принтер автоматически строил карту стола перед началом каждой работы (например, при частой смене пластин), активируйте эту функцию [SAVE_ZMOD_DATA PRINT_LEVELING=1](https://github.com/ghzserg/zmod/wiki/Global_ru#print_leveling).

```gcode
SAVE_ZMOD_DATA PRINT_LEVELING=1
```

Стартовый код можно использовать такой:
```gcode
START_PRINT EXTRUDER_TEMP=[nozzle_temperature_initial_layer] BED_TEMP=[bed_temperature_initial_layer_single]
M190 S[bed_temperature_initial_layer_single] ; Ждать прогрева стола
M104 S[nozzle_temperature_initial_layer] ; Установить температуру сопла
```

**Важно для работы с родного экрана:** Чтобы снятие карты стола инициировалось с родного экрана принтера, необходимо в меню экрана перейти:
`Настройки` → `Иконка WiFi` → `Сетевой режим` → включить ползунок `Только локальные сети`.

**3. Умная очистка перед печатью**

Добавьте эту настройку, чтобы принтер использовал для очистки сопла ту же область, где только что снимал карту стола. Это экономит место и время [SAVE_ZMOD_DATA CLEAR=LINE_PURGE](https://github.com/ghzserg/zmod/wiki/Global_ru#clear).

```gcode
SAVE_ZMOD_DATA CLEAR=LINE_PURGE
```

#### Итог: как настроить KAMP для идеальной печати

Чтобы включить умное построение карты стола перед каждой печатью, выполните один раз команду:

```gcode
SAVE_ZMOD_DATA USE_KAMP=1 PRINT_LEVELING=1 CLEAR=LINE_PURGE
```

Теперь перед каждой печатью принтер будет снимать карту стола, только там где есть объекты для печати

<div align="center">

[![Top](https://github.com/ghzserg/zmod/wiki/images/Top.svg)](#Калибровка)

</div>

---

### Как работает Z-Offset на вашем принтере

**Что такое Z-Offset?**
Проще говоря, это **точное расстояние между кончиком сопла и столом** в момент, когда принтер считает, что они "коснулись" друг друга. Правильный Z-Offset гарантирует, что первый слой пластика будет идеально прилипать к столу — не слишком низко (сопло будет задевать стол) и не слишком высоко (пластик не прилипнет). [Подробнее](https://github.com/ghzserg/zmod/wiki/FAQ#%D0%BA%D0%B0%D0%BA-%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%B0%D0%B5%D1%82-z-offset)

**Самое важное правило:**
На нашем принтере **Z-Offset актуален ТОЛЬКО во время печати**. Значения, которые вы видите на экране или в интерфейсе ДО или ПОСЛЕ печати, являются лишь справочной информацией и не отражают реальную картину.

**Второе важное правило:**
**Z-Offset при работе с родным экраном и при работе в режиме без родного экрана не совпадает** и каждый живет своей жизнью и настраивается отдельно. Используйте ```LOAD_ZOFFSET_NATIVE``` для копирования Z-offset с родного экрана в режим без родного экрана.

#### Регулировка Z-Offset с родного экрана принтера

Родной экран — это основной инструмент для регулировки Z-Offset. Он автоматически управляет смещением, и его настройки сохраняются надежно.

**Чтобы принтер подобрал zoffset автоматически, нужно запустить построение карты стола с родного экрана.**

<img width="800" height="480" alt="image" src="https://github.com/user-attachments/assets/7e5f1ba4-832e-493b-94be-14aadf67ad4e" />

**Как отрегулировать:**

1.  Регулировка возможна **только во время печати**.
2.  Нажмите на **правый нижний квадрат** на сенсорном экране.
    
    <img width="800" height="480" alt="image" src="https://github.com/user-attachments/assets/ae62aced-07af-489f-99b1-ce91cd55027d" />

3.  Затем нажмите на **иконку "карандаш"**, чтобы отредактировать значение Z-Offset.
    
    <img width="800" height="474" alt="image" src="https://github.com/user-attachments/assets/7d185d47-6c60-4d57-8901-923971a9ee7f" />

4.  Вносите изменения, ориентируясь на качество укладки первого слоя.

**Важно знать:**
*   Для принтера AD5M родной экран всегда прибавляет к вашему значению фиксированную величину **0.025 мм**.
*   Поэтому Z-Offset, который вы видите в интерфейсе Fluidd или Mainsail, всегда будет на **0.025 мм БОЛЬШЕ**, чем значение, установленное вами на экране принтера. Это нормально!

#### Регулировка Z-Offset через Fluidd / Mainsail / GuppyScreen при работе **в режиме без родного экрана**

**Как это работает:**

1.  Чтобы принтер запоминал Z-Offset из веб-интерфейса и GuppyScreen, нужно один раз активировать специальную настройку [SAVE_ZMOD_DATA LOAD_ZOFFSET=1](https://github.com/ghzserg/zmod/wiki/Global_ru#load_zoffset):
    ```gcode
    SAVE_ZMOD_DATA LOAD_ZOFFSET=1
    ```
    *Эта команда говорит системе: "Загружай Z-Offset из сохраненных настроек, а не обнуляй его".*

2.  После включения этой опции вы можете регулировать Z-Offset прямо во время печати в Fluidd/Mainsail или через панель регулировки в GuppyScreen.

    <img width="418" height="73" alt="image" src="https://github.com/user-attachments/assets/96d644b3-9c52-44d1-9a7c-18ccbac61796" />

    <img width="800" height="480" alt="image" src="https://github.com/user-attachments/assets/0f282f39-dec1-4488-9317-4e1395747277" />
3.  Если вы хотите перенести z-offset с родного экрана в режим без родного экрана вызовите макрос ```LOAD_ZOFFSET_NATIVE``` он считает значение z-offset с родного экрана и применит его для режима без родного экрана.

**Ключевые преимущества:**
*   **Сохраняется автоматически.** Вне зависимости от способа регулировки (экран или веб-интерфейс), значение Z-Offset автоматически сохраняется и автоматически применяется при следующей печати.
*   **Не требуются ручные команды.** Вам НЕ нужно использовать команды `Z_OFFSET_APPLY_PROBE` или `Z_OFFSET_APPLY_ENDSTOP`. Вся работа происходит "под капотом".

#### Про Z-Offset простыми словами:

*   **Регулируйте Z-Offset только во время печати первого слоя.**
*   **При работе с родным экраном — регулируйте z-offset на нем.**
*   **При работе в режиме без родного экрана**, сначала выполните команду ```SAVE_ZMOD_DATA LOAD_ZOFFSET=1```.
*   Система сама всё сохранит. Вам не о чем беспокоиться.

> [!CAUTION]
> На этом принтере нельзя использовать `Z_OFFSET_APPLY_ENDSTOP`
> 
> И нельзя менять ```[probe] z_offset: ``` в ```printer.cfg``` или ```printer.base.cfg```
> 
> Т.к. родной экран и макрос ```START_PRINT``` подгружают офсет в начале печати.

<div align="center">

[![Top](https://github.com/ghzserg/zmod/wiki/images/Top.svg)](#Калибровка)

</div>

---

### Калибровка шейперов (Input Shaper)

**Что такое шейперы и зачем они нужны?**
Когда принтер быстро двигается, он может вибрировать, как машина на высокой скорости. Эти вибрации отпечатываются на вашей модели в виде "ряби" или "призраков" на стенках. Шейперы — это умные алгоритмы, которые "предсказывают" и подавляют эти вибрации, позволяя печатать быстрее и без потери качества.

Ваш принтер уже автоматически настроил шейперы при первой калибровке, и этого достаточно для большинства задач. Но если вы хотите добиться максимального качества или понять, как работает ваш принтер, можно посмотреть на графики и выбрать настройки вручную.

#### Важный момент: параметр `FIX_SCV`

**В чем проблема?**
Расчеты графиков и шейперов в Klipper по умолчанию используют значение `square_corner_velocity = 5`. Но в нашем принтере значение этого параметра указано как `25`. Это несоответствие приводит к тому, что расчетные значения максимального ускорения на графиках оказываются завышенными в несколько раз.

**Что делать?**
1.  **Исправить расчеты:** Активируйте исправление для корректного отображения графиков [SAVE_ZMOD_DATA FIX_SCV=1](https://github.com/ghzserg/zmod/wiki/Global_ru#fix_scv).
    ```gcode
    SAVE_ZMOD_DATA FIX_SCV=1
    ```

2.  **Улучшить качество печати (Рекомендуется):** Добавьте в файл `mod_data/user.cfg` следующую строку:
    ```ini
    [printer]
    square_corner_velocity: 9
    ```
    *   **Что это даст?** Принтер будет немного снижать скорость в резких поворотах. Это незначительно увеличит время печати, но существенно уменьшит вибрации и улучшит четкость углов.

А можно все упростить. Введите в консоль ```ENABLE_PLUGIN name=recommend``` - эта команда  включит плагин рекомендаций, в котором уже включен `FIX_SCV` и прописан `square_corner_velocity: 9`

Не забудьте перезагрузить принтер!

#### Как использовать макрос `ZSHAPER`

[ZSHAPER](https://github.com/ghzserg/zmod/wiki/Calibrations_ru#zshaper) - этот макрос заставляет принтер вибрировать с разными частотами, измеряет отклик и строит графики, чтобы найти идеальные параметры шейпера для осей X и Y.

**Особенность для принтеров с малым объемом памяти (AD5M, AD5MPro):**
Чтобы не перегружать систему, **нужно калибровать оси по отдельности**.

*   `ZSHAPER` — калибрует обе оси (X и Y).
*   `ZSHAPER X=1 Y=0` — калибрует только ось X (быстрее и меньше нагрузка).
*   `ZSHAPER Y=1 X=0` — калибрует только ось Y.

**Пример использования и вывод:**
1.  Введите в консоль команду для калибровки оси Y:
    ```gcode
    ZSHAPER Y=1 X=0
    ```

2.  После завершения измерений вы получите примерно такой отчет:
    ```
    // Recommended shaper is zv @ 53.2 Hz
    // Fitted shaper 'zv' frequency = 53.2 Hz (vibrations = 0.9%, smoothing ~= 0.074)
    // To avoid too much smoothing with 'zv', suggested max_accel <= 10200 mm/sec^2
    // Fitted shaper 'mzv' frequency = 54.2 Hz (vibrations = 0.0%, smoothing ~= 0.080)
    // To avoid too much smoothing with 'mzv', suggested max_accel <= 8700 mm/sec^2
    ```
    *   Система рекомендует шейпер `zv`, так как у него самое слабое сглаживание (`smoothing`).
    *   Но шейпер `mzv` полностью подавляет вибрации (`0.0%`), хоть и требует немного меньшего ускорения.

#### Как интерпретировать результаты и принять решение

**Где посмотреть графики?**
После выполнения `ZSHAPER` графики и CSV-файлы появятся на вкладке **"Конфигурация" -> mod_data** в вашем веб-интерфейсе (Fluidd/Mainsail).

<img width="996" height="596" alt="image" src="https://github.com/user-attachments/assets/7e1dbdf8-5de5-4ce6-8f4a-2c37b320b8b3" />

**Подробная инструкция по чтению графиков:** [https://github.com/Tombraider2006/klipperFB6/blob/main/accel_graph/readme.md](https://github.com/Tombraider2006/klipperFB6/blob/main/accel_graph/readme.md)

**Вариант 1: Принять автоматическую настройку**

Если вас всё устраивает, просто нажмите кнопку **`SAVE CONFIG & RESTART`** в веб-интерфейсе, и принтер сам запишет рекомендованные параметры.

<img width="324" height="68" alt="image" src="https://github.com/user-attachments/assets/9c76d5f7-0021-4e03-b495-6736f49dc1c9" />

<img width="745" height="389" alt="image" src="https://github.com/user-attachments/assets/b5b55e95-52af-4ee0-b34e-5bc6077d8d10" />

**Вариант 2: Ручная настройка**

В примере выше мне показался лучше шейпер `mzv`, так как он полностью убирает вибрации. Чтобы  его использовать нужно вручную добавить настройки в файл `printer.cfg` (в секцию `[input_shaper]`):

```ini
[input_shaper]
shaper_type_y = mzv   ; Выбранный тип шейпера для оси Y
shaper_freq_y = 54.2  ; Резонансная частота для оси Y
```

**И не забудьте про ускорение!**
Так как выбранный шейпер `mzv` позволяет использовать ускорение не более 8700 мм/с², это значение нужно прописать в файл `mod_data/user.cfg`:

```ini
[printer]
max_accel: 8700 ; Максимальное ускорение для осей X и Y
```

#### Краткий алгоритм действий для калибровки шейперов:
1.  Выполните `SAVE_ZMOD_DATA FIX_SCV=1` для корректных расчетов.
2.  Добавьте `square_corner_velocity: 9` в `mod_data/user.cfg` для лучшего качества.
3.  Запустите калибровку нужной оси, например, `ZSHAPER Y=1`.
4.  Изучите графики и вывод в консоли.
5.  Либо нажмите `SAVE CONFIG`, либо вручную пропишите понравившиеся `shaper_type` и `shaper_freq` в `printer.cfg`, а также `max_accel` в `mod_data/user.cfg`.
6.  Перезагрузите принтер.

<div align="center">

[![Top](https://github.com/ghzserg/zmod/wiki/images/Top.svg)](#Калибровка)

</div>

---

## Updating the Mod
## Обновление мода

Если мод пишет `Обновите ZMOD с флешки`, то нужно обновить zMod с флешки, даже если вы его недавно обновляли.

**При обновлении с флешки все данные сохраняются.**

**Проще всего обновить мод через флешку макросом [ZFLASH](https://github.com/ghzserg/zmod/wiki/Zmod_ru#zflash)**

В этом случае, вам нужно вставить флешку в принтер, перезагрузить принтер и вызвать макрос `ZFLASH`.

- Макрос посмотрит последнюю актуальную версию
- Скачает последний релиз для вашей модели принтера
- Проверит контрольные суммы
- Перезагрузит принтер
- Новая версия установится автоматически после перезагрузки (флешку вытаскивать нет необходимости, ее можно оставить в принтере для следующих обновлений)
- Далее переходите во Fluidd/Mainsail на вкладку `Настройки` -> `Обновление ПО`. Нажмите `Проверить обновления` и установите последние обновления `ZMOD`

<img width="1239" height="535" alt="image" src="https://github.com/user-attachments/assets/b42c4ce9-1c0a-45c0-a20c-36919a27d648" />

Если показывает много ошибок, то это нормально.

Так как плагины не входят в состав прошивки и скачиваются отдельно.

Нужно нажать `Проверить обновления`. И по одному восстановить и обновить модули. Принтер при этом будет перезагружаться.

<img width="671" height="223" alt="image" src="https://github.com/user-attachments/assets/5744dc8e-ba58-4359-b78a-652be846ca07" />

Посмотреть текущую версию операционной системы мода можно на вкладке "Система" -> "Дистрибутив"

Текущая версия zMod (вкладка "Настройки" -> "Обновление" -> "ffm5/zmod"), **должна совпадать** первыми двумя цифрами с версией со вкладки система.

<u>Если не совпадает, то мод **будет работать некорректно**, в этом случае не надо жаловаться на ZMOD</u>

Обновление через флешку:
1. Отформатировать USB Flash в FAT/FAT16/FAT32
2. Поместить [файл](https://github.com/ghzserg/zmod/releases/) в корневую папку USB Flash.
   - для FF5M: Adventurer5M-**zmod**-\*.tgz
   - для FF5MPro: Adventurer5MPro-**zmod**-\*.tgz
   - для [AD5X](https://github.com/ghzserg/zmod/wiki/AD5X): AD5X-**zmod**-\*.tgz
3. Выключить принтер
4. Вставить флешку в принтер
5. Включить принтер
6. Дождаться перезагрузки принтера (вытаскивать флешку не надо)
7. Дождаться установки мода
8. Когда принтер напишет что установка прошла
9. Вытащить флешку
10. Выключить принтер
11. Включить принтер
12. Переходите во Fluidd/Mainsail на вкладку `Настройки` -> `Обновление ПО`. Нажмите `Проверить обновления` и установите последние обновления `ZMOD`

<div align="center">

[![Top](https://github.com/ghzserg/zmod/wiki/images/Top.svg)](#Установка)

</div>

---

## Помочь разработке

[СБП, Банковская карта, T-pay](https://pay.cloudtips.ru/p/3cbf9e9f)

<img width="262" height="262" alt="qrCode" src="https://github.com/user-attachments/assets/e7c1ebf3-3a54-4b46-b071-06656ac06ae1" />

BTC `17wXTd9BqYp1K3zCLTxVyGLEXUDjf7XNLL`

<div align="center">

[![Top](https://github.com/ghzserg/zmod/wiki/images/Top.svg)](#Установка)

</div>

---

## Удаление - временное отключение мода

- [SKIP_ZMOD](https://github.com/ghzserg/zmod/wiki/Zmod_ru#skip_zmod) - макрос перезагрузки без запуска moonraker и fluidd
- [REMOVE_ZMOD](https://github.com/ghzserg/zmod/wiki/Zmod_ru#remove_zmod) - макрос удаления мода

Рекомендуется **удалять мод через макрос `REMOVE_ZMOD`**, удаление через флешку использовать, только если нет возможности запустить макрос.

Внимание!
- Если у вас используется Klipper 13, то надо выполнить ```UPDATE_MCU```. Это позволит избежать ситуации, когда MCU и Klipper разных версий.
- Если у вас включены плагины, то сначала нужно их отключить ```DISABLE_PLUGIN name=g28_tenz```

Полностью удалить мод ```REMOVE_ZMOD FULL=1```

Удаление мода  через флешку:
- Отформатируйте флешку в FAT/FAT16/FAT32
- Поместите файл [flashforge_init.sh](https://github.com/ghzserg/zmod/blob/main/Native_firmware/rem_zmod/flashforge_init.sh) на эту флешку
- Выключите принтер
- Вставьте флешку в принтер
- Включите принтер
- Принтер 3 раза перезагрузится
- Извлеките флешку и пользуйтесь стоковой прошивкой

<div align="center">

[![Top](https://github.com/ghzserg/zmod/wiki/images/Top.svg)](#Установка)

</div>

---

## Как обновлять сток?

1. Отключиьте все активные плагины кроме recommend, timelamse, notify (```DISABLE_PLUGIN name=имя_плагина```)
2. Если у вас используется **Klipper 13**, то перед обновлением родной прошивки надо выполнить ```UPDATE_MCU```. Это позволит избежать ситуации, когда MCU и Klipper разных версий.
3. Включите китайские облака, если хотите обновиться с родного экрана ```SAVE_ZMOD_DATA CHINA_CLOUD=1```

Если родной экран не находит обновления:
- Ваш серийный номер еще не попал под раздачу обновлений
- [Установите обновление родной прошивки с флешки](https://github.com/ghzserg/zmod/wiki/R)

**Для [AD5X](https://github.com/ghzserg/zmod/wiki/AD5X) требуется [активация zMod](https://github.com/ghzserg/zmod/wiki/R) через `AD5X-ENABLE-zmod.tgz` с флешки, после обновления стока**.

<div align="center">

[![Top](https://github.com/ghzserg/zmod/wiki/images/Top.svg)](#Установка)

</div>

---

## Восстановление загрузки

Авторы инструкции: [@darksimpson](https://t.me/darksimpson), [Александр](https://github.com/DrA1ex), [@Ikaros413](https://t.me/Ikaros413), [@SoloMen88](https://t.me/SoloMen88)

Для тех у кого принтер при включении повисает на заставке и не доступен по ЛАН кабелю.

[[/images/ff.jpg]]

Попробуйте восстановить прошивку, через установку полной прошивки:
- [FF5M](https://github.com/ghzserg/zmod/wiki/R#%D1%83%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%BA%D0%B0-%D0%BF%D0%BE%D0%BB%D0%BD%D0%BE%D0%B9-%D0%BF%D1%80%D0%BE%D1%88%D0%B8%D0%B2%D0%BA%D0%B8-%D0%BD%D0%B0-ff5m)
- [AD5X](https://github.com/ghzserg/zmod/wiki/R#%D1%83%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%BA%D0%B0-%D0%BF%D0%BE%D0%BB%D0%BD%D0%BE%D0%B9-%D0%BF%D1%80%D0%BE%D1%88%D0%B8%D0%B2%D0%BA%D0%B8-%D0%BD%D0%B0-ad5x)

Алгоритм восстановления:
1. **Обесточить принтер**
2. Подготовить преобразователь UART/USB (Нужен на 3.3V, или с джампером 5V/3.3V)

[[/images/ch340.jpg]]

**ВНИМАНИЕ!** конвертор должен быть на 3.3 ВОЛЬТА, подадите 5 вольт и процессор сгорит! 

3. Открыть заднюю стенку FlashForge
4. Подключиться к выводу UART на плате (подключаем RX, TX, GND, **3.3V не подключать**)

[[/images/connect.jpg]]

ОБЯЗАТЕЛЬНО, ПЕРЕКИДЫВАЕМ ДЖАМПЕР (если у вас есть) С 5V на 3.3V  Если подадите на 5V, то попадете на замену материнской платы.
Как должно выглядеть подключение в конечном итоге:
- RX/TX подключаются крест накрест RX-TX TX-RX
- GND преобразователя к GND на плате
- 3.3V никуда не подключается

[[/images/connect_photo.jpg]]

5. В системе должен появиться новый СОМ-порт.

[[/images/port.jpg]]

6. Запускаем программу [PuTTY](https://www.chiark.greenend.org.uk/~sgtatham/putty/latest.html), там вписываем ваш СОМ-порт(в примере  выше COM6), скорость `115200`, тип подключения - `Serial`.

7. Подаем штатное питание на принтер.

8. В терминале нужно дождаться строки:
```
Hit any key to stop autoboot
```
затем  быстро нажать `Enter`.

9. После этого вы окажетесь в `U-Boot`. Из него самого можно многое сделать (пишите `help`)

Но нам достаточно переопределить стартовую команду для ядра линукса, чтобы получить шелл.

Пишем в U-boot через терминал:

```
setenv init /bin/sh
boot
```

10. Если все сделали правильно, то получите `sh` после загрузки ядра Linux.

11. Файловая система смонтирована в режиме только для чтения, так что нужно будет её перемонтировать:

```
mount -t proc proc /proc
mount -o remount,rw /
```

12. Исправляем то что сломалось, например `rm -f /etc/init.d/S01bad_script`, или `rm -f /opt/config/mod/.shell/S98camera`, если у вас не проходит запуск из-за камеры.

13. Нужно сохранить изменения: ```sync```

14. И перезагрузиться: ```reboot```

<div align="center">

[![Top](https://github.com/ghzserg/zmod/wiki/images/Top.svg)](#Установка)

</div>
